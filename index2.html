<!DOCTYPE html>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>echarts中国地图数据</title>
	<script src="js/jquery-1.11.0.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="js/echarts.min.js"></script>
	<script type="text/javascript" src="js/china.js"></script>

	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="css/demo.css" />
	<link rel="stylesheet" type="text/css" href="css/component.css" />
	<script>document.documentElement.className = 'js';</script>
</head>

<body class="demo-2">
	<svg class="hidden">

		<symbol id="icon-caret" viewBox="0 0 24 24">
			<title>caret</title>
			<polygon points="15.7,16.6 11.1,12 15.7,7.4 14.3,6 8.3,12 14.3,18" />
		</symbol>

	</svg>
	<main class="view">
		<div class="content">
			<div class="deco">
				<p class="deco__text">A War Without Smoke!</p>
			</div>
			<header class="codrops-header">

				<p class="codrops-header__info">mushy hyperdrive<br />green trees<br />fantasmania<br />pin theater</p>
				<span class="codrops-header__deco">hitherto</span>
				<h1 class="codrops-header__title">wild</h1>

			</header>
		</div>
		<nav class="tabsnav tabsnav--vertical tabsnav--zeru">
			<div class="tabsnav__item">
				<div class="tabsnav__bar"></div>
				<h3 class="tabsnav__title">Situation__IN__China</h3>
			</div>
			<div class="tabsnav__item">
				<div class="tabsnav__bar"></div>
				<h3 class="tabsnav__title">Polarization</h3>
			</div>
			<div class="tabsnav__item">
				<div class="tabsnav__bar"></div>
				<h3 class="tabsnav__title">Wallypurific</h3>
			</div>
		</nav>


		<div class="tabscontent">

			<div class="tabscontent__item">
				<div class="column" style="width: 80Vw;">
					<div id="main" style="width: 100%;height: 80vh;opacity: 1; transform: translateY(0px);"></div>
				</div>
			</div>

			<div class="tabscontent__item">
				<div class="column" style="width: 80Vw;">
					<div id="main" style="width: 100%;height: 80vh;opacity: 0; transform: translateY(0px);"></div>
				</div>
			</div>

			<div class="tabscontent__item">
				<div class="column" style="width: 80Vw;">
					<div id="main" style="width: 100%;height: 80vh;opacity: 0; transform: translateY(0px);"></div>
				</div>
			</div>
			<button class="btn btn--back"><svg class="icon icon--caret">
					<use xlink:href="#icon-caret"></use>
				</svg></button>
		</div>
	</main>

	<script src="js/anime.min.js"></script>
	<script src="js/enquire.min.js"></script>
	<script src="js/tabsnav.js"></script>
	<script src="js/demo2.js"></script>
</body>


<script type="text/javascript">
	function sendAjaxGet_data_set() {
		$.ajax({
			type: "GET",
			sync: false,
			async: false,
			url: "http://127.0.0.1:5000/nowConfirm",
			success: function (res) {
				//请求成功时执行该函数内容，result即为服务器返回的json对象
				var mydataset = JSON.parse(res)

				if (mydataset) {
					console.log(mydataset[1])
					// var name = new Array();
					// var values = new Array();
					// for (var i = 0; i < mydataset.length; i++) {
					// 	name.push(mydataset[i].name); //挨个取出类别并填入类别数组
					// }
					// for (var i = 0; i < mydataset.length; i++) {
					// 	values.push(mydataset[i].nowConfirm); //挨个取出销量并填入销量数组
					// }
					// console.log(values)
					// console.log(name)
				}
				var ec_center = echarts.init(document.getElementById('main'), "dark");
				// var mydata =[{'name':'上海'}]
				var ec_center_option = {
					// bgColor: '#354e90',
					// backgroundColor: '#FFFFFF',
					title: {
						text: '',
						subtext: '',
						x: 'left'
					},
					tooltip: {
						trigger: 'item'
					},
					//左侧小导航图标
					visualMap: {
						show: true,
						x: 'left',
						y: 'bottom',
						textStyle: {
							fontSize: 12,
							color: '#fff'
						},
						splitList: [{
							start: 0,
							end: 9
						},
						{
							start: 10,
							end: 199
						},
						{
							start: 200,
							end: 399
						},
						{
							start: 400,
							end: 499
						},
						{
							start: 500
						},
						],
						color: ['#8A3310', '#C64918', '#E55B25', '#F2AD92', '#F9DCD1']
					},
					//配置属性
					series: [{
						name: '当前确诊人数',
						type: 'map',
						mapType: 'china',
						drawOutOfBound: true,
						roam: false, //拖动和缩放
						itemStyle: {
							normal: {
								borderWidth: .5, //区域边框宽度
								borderColor: '#009fe8', //区域边框颜色
								areaColor: "#ffefd5", //区域颜色
							},
							emphasis: { //鼠标滑过地图高亮的相关设置
								borderWidth: .5,
								borderColor: '#4b0082',
								areaColor: "#fff",
								fontSize: 12

							}
						},
						label: {
							normal: {
								show: true, //省份名称
								fontSize: 9,
								color: '#555555'
							},
							emphasis: {
								show: true,
								fontSize: 12,
							}
						},
						data: [] //数据
					}]
				};
				ec_center_option.series[0].data = mydataset;

				ec_center.setOption(ec_center_option)
			},
			error: function (errorMsg) {
				//请求失败时执行该函数
				alert("图表请求数据失败!");
			}
		})
	}
	sendAjaxGet_data_set()
	setInterval(sendAjaxGet_data_set, 1000 * 30);
</script>



</html>